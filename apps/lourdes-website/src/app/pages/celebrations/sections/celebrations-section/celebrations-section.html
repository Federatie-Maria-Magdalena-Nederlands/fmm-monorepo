<!-- Celebrations Section -->
<section class="py-16 px-2 bg-white relative overflow-hidden mb-4">
  <app-abstract-background></app-abstract-background>

  <!-- Content -->
  <div class="max-w-7xl mx-auto relative z-10">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4">
        Schema van Onze Vieringen
      </h2>
      <p class="text-xl text-amber-700 font-semibold mb-2">
        Liturgische Kalender
      </p>
      <div class="h-1 w-20 bg-amber-600 mx-auto"></div>
    </div>

    <div class="prose prose-lg max-w-none">
      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        <b> Een plek van gebed, ontmoeting en geloof </b>
      </p>

      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        In de Lourdesparochie aan de Slinge in Rotterdam komt een warme en diverse
        gemeenschap samen om hun geloof te vieren. Onze diensten zijn momenten van
        vrede, bezinning en verbinding—met God en met elkaar. Of
        je nu al jaren betrokken bent of voor het eerst op bezoek komt,
        je bent van harte welkom zoals je bent.
      </p>
      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        Elke viering draagt bij aan het levend houden van geloof in ons dagelijks leven.
        Met inspirerende woorden, ontroerende muziek en verbindende rituelen willen we
        ruimte creëren voor geloof, hoop en liefde. We geloven dat God vandaag nog steeds
        spreekt, werkt en mensen samenbrengt – hier, in het
        hart van Rotterdam-Zuid.
      </p>

      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        Word aangemoedigd, gevoed en verwelkomd. Want samen zijn wij de
        levende kerk.
      </p>
    </div>

    <!-- Tables Container -->
    <div class="grid grid-cols-1 xl:grid-cols-12 gap-6 mb-8">
      <!-- Weekly Schedule Table -->
      <div class="xl:col-span-3">
        <div class="bg-white rounded-lg shadow-xl overflow-hidden">
          <table class="table table-zebra w-full border-collapse">
            <thead class="bg-white border-b-2 border-gray-400">
              <tr>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Dag
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Tijd
                </th>
              </tr>
            </thead>
            <tbody>
              @for(schedule of weeklySchedule; track schedule.day) {
              <tr class="hover:bg-gray-50">
                <td class="py-4 px-4 border border-gray-300 font-medium">
                  {{ schedule.day }}
                </td>
                <td
                  class="text-center py-4 px-4 border border-gray-300 font-medium"
                >
                  {{ schedule.time }}
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
        <p class="mt-6">Vieringstijden kunnen afwijken op feestdagen.</p>
      </div>

      <!-- Desktop Celebrations Table -->
      <div class="xl:col-span-9">
        @if (loading()) {
        <div class="flex justify-center items-center py-20">
          <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-amber-600"></div>
        </div>
        }
        
        @if (!loading() && celebrations().length > 0) {
        <div
          class="hidden lg:block overflow-x-auto bg-white rounded-lg shadow-xl"
        >
          <table class="table table-zebra w-full border-collapse">
            <thead class="bg-white border-b-2 border-gray-400">
              <tr>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Datum
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Kerklocatie
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Tijd
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Celebrant
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Type Viering
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Liturgische Kalender
                </th>
                <th
                  class="text-center text-gray-800 font-bold py-4 px-4 border border-gray-300"
                >
                  Speciale Opmerkingen
                </th>
              </tr>
            </thead>
            <tbody>
              @for(celebration of celebrations(); track celebration.id) {
              <tr
                [class.bg-yellow-50]="isHighlighted(celebration)"
                [class.hover:bg-yellow-100]="isHighlighted(celebration)"
                [class.hover:bg-gray-50]="!isHighlighted(celebration)"
              >
                <td
                  class="font-semibold text-gray-800 py-4 px-4 border border-gray-300"
                >
                  {{ formatDate(celebration.date) }}
                </td>
                <td class="text-center py-4 px-4 border border-gray-300">
                  {{ celebration.location }}
                </td>
                <td
                  class="text-center font-medium py-4 px-4 border border-gray-300"
                >
                  {{ celebration.time }}
                </td>
                <td class="py-4 px-4 border border-gray-300">
                  {{ celebration.celebrant }}
                </td>
                <td class="text-center py-4 px-4 border border-gray-300">
                  <span class="badge badge-outline"
                    >{{ celebration.celebrationType }}</span
                  >
                </td>
                <td class="py-4 px-4 border border-gray-300">
                  {{ celebration.liturgicalCalendar }}
                </td>
                <td class="py-4 px-4 border border-gray-300">
                  @if(celebration.specialNotes) {
                  <span
                    class="text-sm"
                    [class.text-red-600]="isHighlighted(celebration)"
                    [class.font-semibold]="isHighlighted(celebration)"
                    >{{ celebration.specialNotes }}</span
                  >
                  }
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
        }
        
        @if (!loading() && celebrations().length === 0) {
        <div class="text-center py-20">
          <p class="text-gray-600 text-lg">No celebrations scheduled at the moment. Please check back later!</p>
        </div>
        }
      </div>
    </div>

    <!-- Mobile Card View -->
    @if (loading()) {
    <div class="lg:hidden flex justify-center items-center py-20">
      <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-amber-600"></div>
    </div>
    }
    
    @if (!loading() && celebrations().length > 0) {
    <div class="lg:hidden space-y-4">
      @for(celebration of celebrations(); track celebration.id) {
      <div
        class="card bg-base-100 shadow-lg"
        [class.border-2]="isHighlighted(celebration)"
        [class.border-yellow-400]="isHighlighted(celebration)"
        [class.bg-yellow-50]="isHighlighted(celebration)"
      >
        <div class="card-body">
          <div class="flex justify-between items-start mb-3">
            <h3 class="card-title text-lg">{{ formatDate(celebration.date) }}</h3>
            <span class="badge badge-primary">{{ celebration.time }}</span>
          </div>

          <div class="space-y-2 text-sm">
            <div class="flex">
              <span class="font-semibold w-32 text-gray-600">Location:</span>
              <span>{{ celebration.location }}</span>
            </div>
            <div class="flex">
              <span class="font-semibold w-32 text-gray-600">Celebrant:</span>
              <span>{{ celebration.celebrant }}</span>
            </div>
            <div class="flex">
              <span class="font-semibold w-32 text-gray-600">Type:</span>
              <span class="badge badge-outline"
                >{{ celebration.celebrationType }}</span
              >
            </div>
            <div class="flex">
              <span class="font-semibold w-32 text-gray-600">Calendar:</span>
              <span>{{ celebration.liturgicalCalendar }}</span>
            </div>
            @if(celebration.specialNotes) {
            <div class="flex">
              <span class="font-semibold w-32 text-gray-600">Notes:</span>
              <span
                class="text-sm"
                [class.text-red-600]="isHighlighted(celebration)"
                [class.font-semibold]="isHighlighted(celebration)"
                >{{ celebration.specialNotes }}</span
              >
            </div>
            }
          </div>
        </div>
      </div>
      }
    </div>
    }
    
    @if (!loading() && celebrations().length === 0) {
    <div class="lg:hidden text-center py-20">
      <p class="text-gray-600 text-lg">No celebrations scheduled at the moment. Please check back later!</p>
    </div>
    }

    <!-- Legend -->
    <div class="mt-8 p-6 bg-gray-50 rounded-lg">
      <h3 class="font-bold text-lg mb-3 text-gray-800">Legend</h3>
      <div class="grid md:grid-cols-2 gap-4 text-sm">
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 bg-yellow-200 border border-yellow-400"></div>
          <span>Highlighted celebrations</span>
        </div>
        <div class="flex items-center gap-2">
          <app-spark-icon></app-spark-icon>
          <span>Special liturgical events</span>
        </div>
      </div>
    </div>

    <!-- Additional Information -->
    <div class="mt-8 text-center">
      <p class="text-gray-700 mb-4">
        For more information about our celebrations, please contact the parish
        office.
      </p>
      <div class="flex flex-wrap justify-center gap-4 text-sm text-gray-600">
        <div class="flex items-center gap-2">
          <app-location-icon></app-location-icon>
          <span>Eucharistic celebration at various locations</span>
        </div>
      </div>
    </div>
  </div>
</section>
