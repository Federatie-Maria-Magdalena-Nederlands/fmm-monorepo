<!-- Wedding Form Section -->
<section class="py-16 px-2 bg-gray-50 relative overflow-hidden">
  <app-abstract-background></app-abstract-background>

  <div class="max-w-3xl mx-auto relative z-10">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4">
        Huwelijk Registratieformulier
      </h2>
      <div class="h-1 w-20 bg-amber-600 mx-auto mb-4"></div>
      <p class="text-lg text-gray-700">
        Vul het onderstaande formulier in om uw kerkelijk huwelijk te registreren.
      </p>
    </div>

    <div class="bg-white rounded-2xl shadow-xl p-8">
      <!-- Stepper -->
      <ul class="steps steps-horizontal w-full mb-8">
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 1 }">
          Bruid
        </li>
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 2 }">
          Bruidegom
        </li>
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 3 }">
          Privacy
        </li>
      </ul>

      <form [formGroup]="weddingForm" (ngSubmit)="onSubmit()">
        <!-- Step 1: Bride Information -->
        @if(currentStep === 1) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">Bruid</h3>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Naam bruid <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="brideName"
              placeholder="Voer naam bruid in"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('brideName')?.invalid &&
                weddingForm.get('brideName')?.touched
              "
            />
            @if(weddingForm.get('brideName')?.invalid &&
            weddingForm.get('brideName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Naam bruid is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Achternaam bruid <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="brideLastName"
              placeholder="Voer achternaam bruid in"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('brideLastName')?.invalid &&
                weddingForm.get('brideLastName')?.touched
              "
            />
            @if(weddingForm.get('brideLastName')?.invalid &&
            weddingForm.get('brideLastName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Achternaam bruid is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboortedatum bruid <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="brideDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('brideDOB')?.invalid &&
                weddingForm.get('brideDOB')?.touched
              "
            />
            @if(weddingForm.get('brideDOB')?.invalid &&
            weddingForm.get('brideDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboortedatum bruid is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mobiele telefoon bruid <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="tel"
              formControlName="bridePhone"
              placeholder="+31 6 1234 5678"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('bridePhone')?.invalid &&
                weddingForm.get('bridePhone')?.touched
              "
            />
            @if(weddingForm.get('bridePhone')?.invalid &&
            weddingForm.get('bridePhone')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Telefoonnummer bruid is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >E-mailadres bruid <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="email"
              formControlName="brideEmail"
              placeholder="bruid.email@voorbeeld.nl"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('brideEmail')?.invalid &&
                weddingForm.get('brideEmail')?.touched
              "
            />
            @if(weddingForm.get('brideEmail')?.invalid &&
            weddingForm.get('brideEmail')?.touched) {
            <label class="label">
              @if(weddingForm.get('brideEmail')?.hasError('required')) {
              <span class="label-text-alt text-error">
                E-mailadres bruid is verplicht </span
              >} @else if(weddingForm.get('brideEmail')?.hasError('email')) {
              <span class="label-text-alt text-error">
                Voer een geldig e-mailadres in </span
              >}
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Adres bruid <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="brideAddress"
              placeholder="Straatnaam en huisnummer"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('brideAddress')?.invalid &&
                weddingForm.get('brideAddress')?.touched
              "
            />
            @if(weddingForm.get('brideAddress')?.invalid &&
            weddingForm.get('brideAddress')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Adres bruid is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Postcode en woonplaats bruid
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="bridePostalCity"
              placeholder="Postcode en plaats"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('bridePostalCity')?.invalid &&
                weddingForm.get('bridePostalCity')?.touched
              "
            />
            @if(weddingForm.get('bridePostalCity')?.invalid &&
            weddingForm.get('bridePostalCity')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Postcode en plaats zijn verplicht</span
              >
            </label>
            }
          </div>
        </div>
        }

        <!-- Step 2: Groom Information -->
        @if(currentStep === 2) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">Bruidegom</h3>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Naam bruidegom <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="groomName"
              placeholder="Voer naam bruidegom in"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomName')?.invalid &&
                weddingForm.get('groomName')?.touched
              "
            />
            @if(weddingForm.get('groomName')?.invalid &&
            weddingForm.get('groomName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Naam bruidegom is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Achternaam bruidegom <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="groomSurname"
              placeholder="Voer achternaam bruidegom in"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomSurname')?.invalid &&
                weddingForm.get('groomSurname')?.touched
              "
            />
            @if(weddingForm.get('groomSurname')?.invalid &&
            weddingForm.get('groomSurname')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Achternaam bruidegom is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboortedatum bruidegom <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="groomDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomDOB')?.invalid &&
                weddingForm.get('groomDOB')?.touched
              "
            />
            @if(weddingForm.get('groomDOB')?.invalid &&
            weddingForm.get('groomDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboortedatum bruidegom is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mobiele telefoon bruidegom <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="tel"
              formControlName="groomPhone"
              placeholder="+31 6 1234 5678"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomPhone')?.invalid &&
                weddingForm.get('groomPhone')?.touched
              "
            />
            @if(weddingForm.get('groomPhone')?.invalid &&
            weddingForm.get('groomPhone')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Telefoonnummer bruidegom is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Adres bruidegom <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="groomAddress"
              placeholder="Straatnaam en huisnummer"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomAddress')?.invalid &&
                weddingForm.get('groomAddress')?.touched
              "
            />
            @if(weddingForm.get('groomAddress')?.invalid &&
            weddingForm.get('groomAddress')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Adres bruidegom is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Postcode en woonplaats bruidegom
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="groomPostalCity"
              placeholder="Postcode en plaats"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomPostalCity')?.invalid &&
                weddingForm.get('groomPostalCity')?.touched
              "
            />
            @if(weddingForm.get('groomPostalCity')?.invalid &&
            weddingForm.get('groomPostalCity')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Postcode en plaats zijn verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >E-mailadres bruidegom <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="email"
              formControlName="groomEmail"
              placeholder="bruidegom.email@voorbeeld.nl"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('groomEmail')?.invalid &&
                weddingForm.get('groomEmail')?.touched
              "
            />
            @if(weddingForm.get('groomEmail')?.invalid &&
            weddingForm.get('groomEmail')?.touched) {
            <label class="label">
              @if(weddingForm.get('groomEmail')?.hasError('required')) {
              <span class="label-text-alt text-error">
                E-mailadres bruidegom is verplicht </span
              >} @else if(weddingForm.get('groomEmail')?.hasError('email')) {
              <span class="label-text-alt text-error">
                Voer een geldig e-mailadres in </span
              >}
            </label>
            }
          </div>

          <!-- Godparents Section -->
          <div class="divider my-8"></div>
          <h4 class="text-xl font-bold text-gray-800 mb-4">
            Informatie Doopgetuigen
          </h4>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Naam doopgetuigen <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="godparentsName"
              placeholder="Voer naam doopgetuigen in"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('godparentsName')?.invalid &&
                weddingForm.get('godparentsName')?.touched
              "
            />
            @if(weddingForm.get('godparentsName')?.invalid &&
            weddingForm.get('godparentsName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Naam doopgetuigen is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Achternaam doopgetuigen <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="godparentsSurname"
              placeholder="Voer achternaam doopgetuigen in"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('godparentsSurname')?.invalid &&
                weddingForm.get('godparentsSurname')?.touched
              "
            />
            @if(weddingForm.get('godparentsSurname')?.invalid &&
            weddingForm.get('godparentsSurname')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Achternaam doopgetuigen is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboortedatum doopgetuigen
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="godparentsDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('godparentsDOB')?.invalid &&
                weddingForm.get('godparentsDOB')?.touched
              "
            />
            @if(weddingForm.get('godparentsDOB')?.invalid &&
            weddingForm.get('godparentsDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboortedatum doopgetuigen is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Telefoonnummer doopgetuigen
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="tel"
              formControlName="godparentsPhone"
              placeholder="+31 6 1234 5678"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('godparentsPhone')?.invalid &&
                weddingForm.get('godparentsPhone')?.touched
              "
            />
            @if(weddingForm.get('godparentsPhone')?.invalid &&
            weddingForm.get('godparentsPhone')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Telefoonnummer doopgetuigen is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Adres doopgetuigen <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="godparentsAddress"
              placeholder="Straatnaam en huisnummer"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('godparentsAddress')?.invalid &&
                weddingForm.get('godparentsAddress')?.touched
              "
            />
            @if(weddingForm.get('godparentsAddress')?.invalid &&
            weddingForm.get('godparentsAddress')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Adres doopgetuigen is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Postcode en woonplaats doopgetuigen
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="godparentsPostalCity"
              placeholder="Postcode en plaats"
              class="input input-bordered w-full"
              [class.input-error]="
                weddingForm.get('godparentsPostalCity')?.invalid &&
                weddingForm.get('godparentsPostalCity')?.touched
              "
            />
            @if(weddingForm.get('godparentsPostalCity')?.invalid &&
            weddingForm.get('godparentsPostalCity')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Postcode en plaats zijn verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Zijn de doopgetuigen katholiek?
                <span class="text-red-600">*</span></span
              >
            </label>
            <div class="flex gap-6">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="godparentsCatholic"
                  value="Yes"
                  class="radio radio-warning"
                />
                <span class="label-text">Ja</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="godparentsCatholic"
                  value="No"
                  class="radio radio-warning"
                />
                <span class="label-text">Nee</span>
              </label>
            </div>
            @if(weddingForm.get('godparentsCatholic')?.invalid &&
            weddingForm.get('godparentsCatholic')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Selecteer een optie</span
              >
            </label>
            }
          </div>
        </div>
        }

        <!-- Step 3: Privacy Statement -->
        @if(currentStep === 3) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">
            Privacyverklaring
          </h3>

          <div class="bg-amber-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg text-gray-800 mb-3">
              Privacyverklaring Rooms-Katholieke Parochies en Algemene Verordening Bescherming Persoonsgegevens Parochies 2018
            </h4>
            <p class="text-sm text-gray-700 mb-3">
              In verband met de Algemene Verordening Gegevensbescherming (AVG) is een Privacyverklaring van toepassing en zijn bovengenoemde regelingen opgesteld. De Privacyverklaring en de Algemene Regeling zijn beschikbaar op de website en kunnen worden gedownload.
            </p>
            <p class="text-sm text-gray-700 mb-3">
              U ontvangt automatisch de Privacyverklaring als bijlage bij de kopiebevestiging.
            </p>
            <p class="text-sm text-gray-700 mb-3">
              Hieronder vindt u een aantal zaken (in verkorte, vereenvoudigde versies) die voor u belangrijk zijn en waarvoor wij (vooraf) uw toestemming vragen. Als u twijfelt over de uitleg in de verkorte versie, verwijzen wij u altijd naar de volledige Privacyverklaring en/of de Algemene Regeling.
            </p>
            <p class="text-sm text-gray-700 mb-3 font-semibold">
              Informatie Algemeen
            </p>
            <div class="mt-4 space-y-3">
              <div>
                <p class="font-semibold text-gray-800">Akkoord</p>
                <p class="text-sm text-gray-700">
                  De aanvrager(s) gaat/gaan akkoord met de bepalingen van de Privacyverklaring.
                </p>
              </div>
              <div>
                <p class="font-semibold text-gray-800">Niet akkoord</p>
                <p class="text-sm text-gray-700">
                  Als u niet akkoord gaat, kan de aanvraag niet worden verwerkt.
                </p>
              </div>
              <p class="text-sm text-gray-700">
                De informatie die u verstrekt, kan worden gebruikt voor parochiebeheer en zal hiervoor digitaal of op papier (in registers) worden opgeslagen. Een verzoek om deze gegevens in te zien is mogelijk. Het verzoeken om verwijdering van deze gegevens is over het algemeen niet mogelijk omdat dit noodzakelijk is voor het goed functioneren van een parochiekerk. De "Registratie- en Deregistratieprocedure (2013)" is van toepassing op verzoeken om uit de parochieregisters/administratie te worden verwijderd.
              </p>
              <p class="text-sm text-gray-700">
                Uw informatie wordt altijd vertrouwelijk behandeld en wordt nooit gedeeld met externe instellingen/instanties/derden zonder uw toestemming. Aan het einde van dit formulier worden u enkele vragen gesteld met betrekking tot de AVG. U kunt akkoord of niet akkoord gaan met de daar gestelde vragen, en uw verzoek zal worden verwerkt (ongeacht uw antwoord).
              </p>
            </div>
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Gaat u akkoord met het privacybeleid van onze parochie?
                <span class="text-red-600">*</span></span
              >
            </label>
            <div class="space-y-3">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="privacyAgreement"
                  value="agree"
                  class="radio radio-warning"
                />
                <span class="label-text">Ja! Ik ga akkoord</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="privacyAgreement"
                  value="disagree"
                  class="radio radio-warning"
                />
                <span class="label-text">Nee! Ik ga niet akkoord</span>
              </label>
            </div>
            @if(weddingForm.get('privacyAgreement')?.invalid &&
            weddingForm.get('privacyAgreement')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Ga akkoord met het privacybeleid om door te gaan</span
              >
            </label>
            }
          </div>
        </div>
        }

        <!-- Success Message -->
        @if(submitSuccess) {
        <div class="alert alert-success mb-6">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="stroke-current shrink-0 h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span
            >Hartelijk dank voor uw huwelijksregistratie! We nemen binnenkort contact met u op om uw bijzondere dag te bespreken.</span
          >
        </div>
        }

        <!-- Error Message -->
        @if(submitError) {
        <div class="alert alert-error mb-6">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="stroke-current shrink-0 h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span
            >Er is een fout opgetreden bij het verzenden van uw verzoek. Probeer het opnieuw.</span
          >
        </div>
        }

        <!-- Navigation Buttons -->
        <div class="flex justify-between mt-8">
          @if(currentStep > 1) {
          <button
            type="button"
            class="btn btn-outline btn-warning"
            (click)="previousStep()"
          >
            Vorige
          </button>
          } @else {
          <div></div>
          } @if(currentStep < 3) {
          <button
            type="button"
            class="btn bg-amber-600 hover:bg-amber-700 text-white border-none"
            (click)="nextStep()"
          >
            Volgende
          </button>
          } @else {
          <button
            type="submit"
            class="btn bg-amber-600 hover:bg-amber-700 text-white border-none"
            [disabled]="weddingForm.invalid || isSubmitting"
          >
            @if(isSubmitting) {
            <span class="loading loading-spinner"></span>
            Bezig met verzenden... } @else { Verzoek verzenden }
          </button>
          }
        </div>
      </form>
    </div>
  </div>
</section>
