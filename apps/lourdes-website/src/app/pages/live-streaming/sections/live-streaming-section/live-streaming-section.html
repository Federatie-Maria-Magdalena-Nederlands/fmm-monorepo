<!-- Live Streaming Section -->
<section class="py-16 px-2 bg-white relative overflow-hidden mb-4">
  <app-abstract-background></app-abstract-background>

  <!-- Content -->
  <div class="max-w-6xl mx-auto relative z-10">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4">
        Bekijk Onze Live Vieringen
      </h2>
      <div class="h-1 w-20 bg-amber-600 mx-auto mb-6"></div>

      <!-- YouTube Channel Button -->
      <div class="max-w-5xl mx-auto relative z-10">
        <p class="text-lg text-gray-700 leading-relaxed mb-6 font-bold">
          Volg onze vieringen live – elke zondag om 9:30 uur
        </p>
        <p class="text-lg text-gray-700 leading-relaxed mb-6">
          Kun je niet naar de kerk komen maar wil je toch de kracht van de
          viering ervaren? Dat kan! Elke zondag om 10:30 uur zenden we onze
          dienst live uit, zodat je vanuit huis, onderweg,
          of waar je ook bent verbonden kunt blijven met ons.
        </p>

        <p class="text-lg text-gray-700 leading-relaxed mb-6">
          De livestream is een moment van bezinning, gebed en hoop. Zingen,
          luisteren en samen bidden—zelfs online vormen we één gemeenschap.
          Want geloof verbindt, zelfs door een scherm. Laat je raken
          door de woorden, muziek en stilte. Laat je inspireren en bemoedigen voor de
          komende week.
        </p>
      </div>
      <a
        href="{{youtubeChannelUrl}}"
        target="_blank"
        rel="noopener noreferrer"
        class="btn btn-lg bg-red-600 hover:bg-red-700 text-white border-none shadow-lg hover:shadow-xl transition-all duration-300"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
          />
        </svg>
        Bezoek Ons YouTube-Kanaal
      </a>
    </div>

    <!-- Streaming Events Cards List -->
    @if (loading()) {
    <div class="flex justify-center items-center py-20">
      <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-amber-600"></div>
    </div>
    }
    
    @if (!loading() && liveCelebrations().length > 0) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12">
      @for(stream of liveCelebrations(); track stream.id) {
      <div
        class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300"
      >
        <div class="card-body">
          <div class="flex items-start justify-between mb-2">
            <h3 class="card-title text-xl font-bold text-gray-800">
              {{stream.title}}
            </h3>
            @if(isLive(stream)) {
            <span class="badge badge-error text-white gap-1 animate-pulse">
              <span class="w-2 h-2 bg-white rounded-full"></span>
              LIVE
            </span>
            }
          </div>

          <p class="text-gray-600 text-sm leading-relaxed mb-4">
            {{truncateText(stream.description)}}
          </p>

          @if(formatSchedule(stream)) {
          <div class="flex items-center gap-2 text-sm text-amber-700 mb-4">
            <app-spark-icon></app-spark-icon>
            <span class="font-semibold">{{formatSchedule(stream)}}</span>
          </div>
          }

          <div class="card-actions justify-end">
            <a
              [href]="stream.liveStreamUrl"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-sm bg-amber-600 hover:bg-amber-700 text-white border-none"
            >
              @if(isLive(stream)) { Watch Now } @else { View Stream }
            </a>
          </div>
        </div>
      </div>
      }
    </div>
    }
    
    @if (!loading() && liveCelebrations().length === 0) {
    <div class="text-center py-20">
      <p class="text-gray-600 text-lg">No live celebrations scheduled at the moment. Please check back later!</p>
    </div>
    }
  </div>
</section>
