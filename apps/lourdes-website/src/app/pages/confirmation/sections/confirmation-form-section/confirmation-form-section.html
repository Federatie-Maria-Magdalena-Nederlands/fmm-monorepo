<!-- Confirmation Form Section -->
<section class="py-16 px-2 bg-gray-50 relative overflow-hidden">
  <app-abstract-background></app-abstract-background>

  <div class="max-w-3xl mx-auto relative z-10">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4">
        Vormsel Registratieformulier
      </h2>
      <div class="h-1 w-20 bg-amber-600 mx-auto mb-4"></div>
      <p class="text-lg text-gray-700">
        Vul het onderstaande formulier in om u aan te melden voor het Vormsel.
      </p>
    </div>

    <div class="bg-white rounded-2xl shadow-xl p-8">
      <!-- Stepper -->
      <ul class="steps steps-horizontal w-full mb-8">
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 1 }">
          Vormeling
        </li>
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 2 }">
          Moeder
        </li>
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 3 }">
          Vader
        </li>
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 4 }">
          Sponsor
        </li>
        <li class="step" [ngClass]="{ 'step-warning': currentStep >= 5 }">
          Privacy
        </li>
      </ul>

      <form [formGroup]="confirmationForm" (ngSubmit)="onSubmit()">
        <!-- Step 1: Confirmand Information -->
        @if(currentStep === 1) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">
            Informatie Vormeling
          </h3>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Naam vormeling <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="confirmandName"
              placeholder="Voer naam in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandName')?.invalid &&
                confirmationForm.get('confirmandName')?.touched
              "
            />
            @if(confirmationForm.get('confirmandName')?.invalid &&
            confirmationForm.get('confirmandName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">Naam is verplicht</span>
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Achternaam vormeling <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="confirmandSurname"
              placeholder="Voer achternaam in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandSurname')?.invalid &&
                confirmationForm.get('confirmandSurname')?.touched
              "
            />
            @if(confirmationForm.get('confirmandSurname')?.invalid &&
            confirmationForm.get('confirmandSurname')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">Achternaam is verplicht</span>
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Voornaam vormeling
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="confirmandFirstName"
              placeholder="Voer voornaam in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandFirstName')?.invalid &&
                confirmationForm.get('confirmandFirstName')?.touched
              "
            />
            @if(confirmationForm.get('confirmandFirstName')?.invalid &&
            confirmationForm.get('confirmandFirstName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Voornaam is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboortedatum en geboorteplaats
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="confirmandDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandDOB')?.invalid &&
                confirmationForm.get('confirmandDOB')?.touched
              "
            />
            @if(confirmationForm.get('confirmandDOB')?.invalid &&
            confirmationForm.get('confirmandDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboortedatum is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Gender <span class="text-red-600">*</span></span
              >
            </label>
            <div class="flex gap-6">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="confirmandGender"
                  value="Boy"
                  class="radio radio-warning"
                />
                <span class="label-text">Jongen</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="confirmandGender"
                  value="Girl"
                  class="radio radio-warning"
                />
                <span class="label-text">Meisje</span>
              </label>
            </div>
            @if(confirmationForm.get('confirmandGender')?.invalid &&
            confirmationForm.get('confirmandGender')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Selecteer geslacht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Nationaliteit vormeling
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="confirmandNationality"
              placeholder="Voer nationaliteit in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandNationality')?.invalid &&
                confirmationForm.get('confirmandNationality')?.touched
              "
            />
            @if(confirmationForm.get('confirmandNationality')?.invalid &&
            confirmationForm.get('confirmandNationality')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Nationaliteit is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Gedoopt? <span class="text-red-600">*</span></span
              >
            </label>
            <div class="flex gap-6">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="confirmandBaptized"
                  value="Yes"
                  class="radio radio-warning"
                />
                <span class="label-text">Ja</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="confirmandBaptized"
                  value="No"
                  class="radio radio-warning"
                />
                <span class="label-text">Nee</span>
              </label>
            </div>
            @if(confirmationForm.get('confirmandBaptized')?.invalid &&
            confirmationForm.get('confirmandBaptized')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Selecteer een optie</span
              >
            </label>
            }
          </div>

          @if(confirmationForm.get('confirmandBaptized')?.value === 'Yes') {
          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Indien ja, vermeld de datum
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="confirmandBaptismDate"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandBaptismDate')?.invalid &&
                confirmationForm.get('confirmandBaptismDate')?.touched
              "
            />
            @if(confirmationForm.get('confirmandBaptismDate')?.invalid &&
            confirmationForm.get('confirmandBaptismDate')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Doopdatum is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Doopakte</span
              >
            </label>
            <input
              type="file"
              (change)="onFileSelected($event, 'confirmand')"
              accept="image/*,.pdf"
              class="file-input file-input-bordered file-input-warning w-full"
            />
            @if(selectedConfirmandCertificate) {
            <label class="label">
              <span class="label-text-alt text-success"
                >Geselecteerd: {{ selectedConfirmandCertificate }}</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Doopplaats <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="confirmandBaptismPlace"
              placeholder="Voer doopplaats in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandBaptismPlace')?.invalid &&
                confirmationForm.get('confirmandBaptismPlace')?.touched
              "
            />
            @if(confirmationForm.get('confirmandBaptismPlace')?.invalid &&
            confirmationForm.get('confirmandBaptismPlace')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Doopplaats is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Naam van de parochie waar vormeling gedoopt werd
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="confirmandParishName"
              placeholder="Voer parochienaam in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('confirmandParishName')?.invalid &&
                confirmationForm.get('confirmandParishName')?.touched
              "
            />
            @if(confirmationForm.get('confirmandParishName')?.invalid &&
            confirmationForm.get('confirmandParishName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Parochienaam is verplicht</span
              >
            </label>
            }
          </div>
          }
        </div>
        }

        <!-- Step 2: Mother's Information -->
        @if(currentStep === 2) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">
            Mother's Information
          </h3>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's surname <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherSurname"
              placeholder="Enter mother's surname"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherSurname')?.invalid &&
                confirmationForm.get('motherSurname')?.touched
              "
            />
            @if(confirmationForm.get('motherSurname')?.invalid &&
            confirmationForm.get('motherSurname')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's surname is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's first names <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherFirstNames"
              placeholder="Enter mother's first names"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherFirstNames')?.invalid &&
                confirmationForm.get('motherFirstNames')?.touched
              "
            />
            @if(confirmationForm.get('motherFirstNames')?.invalid &&
            confirmationForm.get('motherFirstNames')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's first names are required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's date of birth
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="motherDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherDOB')?.invalid &&
                confirmationForm.get('motherDOB')?.touched
              "
            />
            @if(confirmationForm.get('motherDOB')?.invalid &&
            confirmationForm.get('motherDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's date of birth is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's place of birth
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherPlaceOfBirth"
              placeholder="Enter place of birth"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherPlaceOfBirth')?.invalid &&
                confirmationForm.get('motherPlaceOfBirth')?.touched
              "
            />
            @if(confirmationForm.get('motherPlaceOfBirth')?.invalid &&
            confirmationForm.get('motherPlaceOfBirth')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's place of birth is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother baptized? <span class="text-red-600">*</span></span
              >
            </label>
            <div class="flex gap-6">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="motherBaptized"
                  value="Yes"
                  class="radio radio-warning"
                />
                <span class="label-text">Yes</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="motherBaptized"
                  value="No"
                  class="radio radio-warning"
                />
                <span class="label-text">No</span>
              </label>
            </div>
            @if(confirmationForm.get('motherBaptized')?.invalid &&
            confirmationForm.get('motherBaptized')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Please select an option</span
              >
            </label>
            }
          </div>

          @if(confirmationForm.get('motherBaptized')?.value === 'Yes') {
          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's baptism date <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="motherBaptismDate"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherBaptismDate')?.invalid &&
                confirmationForm.get('motherBaptismDate')?.touched
              "
            />
            @if(confirmationForm.get('motherBaptismDate')?.invalid &&
            confirmationForm.get('motherBaptismDate')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's baptism date is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Baptismal place of mother
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherBaptismPlace"
              placeholder="Enter baptismal place"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherBaptismPlace')?.invalid &&
                confirmationForm.get('motherBaptismPlace')?.touched
              "
            />
            @if(confirmationForm.get('motherBaptismPlace')?.invalid &&
            confirmationForm.get('motherBaptismPlace')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's baptismal place is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's baptismal certificate</span
              >
            </label>
            <input
              type="file"
              (change)="onFileSelected($event, 'mother')"
              accept="image/*,.pdf"
              class="file-input file-input-bordered file-input-warning w-full"
            />
            @if(selectedMotherCertificate) {
            <label class="label">
              <span class="label-text-alt text-success"
                >Selected: {{ selectedMotherCertificate }}</span
              >
            </label>
            }
          </div>
          }

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's nationality <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherNationality"
              placeholder="Enter nationality"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherNationality')?.invalid &&
                confirmationForm.get('motherNationality')?.touched
              "
            />
            @if(confirmationForm.get('motherNationality')?.invalid &&
            confirmationForm.get('motherNationality')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's nationality is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's address <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherAddress"
              placeholder="Street name and number"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherAddress')?.invalid &&
                confirmationForm.get('motherAddress')?.touched
              "
            />
            @if(confirmationForm.get('motherAddress')?.invalid &&
            confirmationForm.get('motherAddress')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's address is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Postal code and city of mother
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="motherPostalCity"
              placeholder="Zip code and city"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherPostalCity')?.invalid &&
                confirmationForm.get('motherPostalCity')?.touched
              "
            />
            @if(confirmationForm.get('motherPostalCity')?.invalid &&
            confirmationForm.get('motherPostalCity')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Postal code and city are required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mobile phone mother <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="tel"
              formControlName="motherPhone"
              placeholder="+31 6 1234 5678"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherPhone')?.invalid &&
                confirmationForm.get('motherPhone')?.touched
              "
            />
            @if(confirmationForm.get('motherPhone')?.invalid &&
            confirmationForm.get('motherPhone')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Mother's phone number is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mother's email address
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="email"
              formControlName="motherEmail"
              placeholder="mother.email@example.com"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('motherEmail')?.invalid &&
                confirmationForm.get('motherEmail')?.touched
              "
            />
            @if(confirmationForm.get('motherEmail')?.invalid &&
            confirmationForm.get('motherEmail')?.touched) {
            <label class="label">
              @if(confirmationForm.get('motherEmail')?.hasError('required')) {
              <span class="label-text-alt text-error">E-mailadres moeder is verplicht</span>
              } @else if(confirmationForm.get('motherEmail')?.hasError('email'))
              {
              <span class="label-text-alt text-error">
                Voer een geldig e-mailadres in
              </span>
              }
            </label>
            }
          </div>
        </div>
        }

        <!-- Step 3: Father's Information -->
        @if(currentStep === 3) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">
            Informatie Vader
          </h3>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Achternaam vader <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="fatherSurname"
              placeholder="Voer achternaam vader in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherSurname')?.invalid &&
                confirmationForm.get('fatherSurname')?.touched
              "
            />
            @if(confirmationForm.get('fatherSurname')?.invalid &&
            confirmationForm.get('fatherSurname')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Achternaam vader is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Voornamen vader <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="fatherFirstNames"
              placeholder="Voer voornamen vader in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherFirstNames')?.invalid &&
                confirmationForm.get('fatherFirstNames')?.touched
              "
            />
            @if(confirmationForm.get('fatherFirstNames')?.invalid &&
            confirmationForm.get('fatherFirstNames')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Voornamen vader zijn verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboortedatum vader
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="fatherDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherDOB')?.invalid &&
                confirmationForm.get('fatherDOB')?.touched
              "
            />
            @if(confirmationForm.get('fatherDOB')?.invalid &&
            confirmationForm.get('fatherDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboortedatum vader is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboorteplaats vader
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="fatherPlaceOfBirth"
              placeholder="Voer geboorteplaats in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherPlaceOfBirth')?.invalid &&
                confirmationForm.get('fatherPlaceOfBirth')?.touched
              "
            />
            @if(confirmationForm.get('fatherPlaceOfBirth')?.invalid &&
            confirmationForm.get('fatherPlaceOfBirth')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboorteplaats vader is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Vader gedoopt? <span class="text-red-600">*</span></span
              >
            </label>
            <div class="flex gap-6">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="fatherBaptized"
                  value="Yes"
                  class="radio radio-warning"
                />
                <span class="label-text">Ja</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="fatherBaptized"
                  value="No"
                  class="radio radio-warning"
                />
                <span class="label-text">Nee</span>
              </label>
            </div>
            @if(confirmationForm.get('fatherBaptized')?.invalid &&
            confirmationForm.get('fatherBaptized')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Selecteer een optie</span
              >
            </label>
            }
          </div>

          @if(confirmationForm.get('fatherBaptized')?.value === 'Yes') {
          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Doopsdatum vader <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="fatherBaptismDate"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherBaptismDate')?.invalid &&
                confirmationForm.get('fatherBaptismDate')?.touched
              "
            />
            @if(confirmationForm.get('fatherBaptismDate')?.invalid &&
            confirmationForm.get('fatherBaptismDate')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Doopsdatum vader is verplicht</span
              >
            </label>
            }
          </div>
          }

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Nationaliteit vader <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="fatherNationality"
              placeholder="Voer nationaliteit in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherNationality')?.invalid &&
                confirmationForm.get('fatherNationality')?.touched
              "
            />
            @if(confirmationForm.get('fatherNationality')?.invalid &&
            confirmationForm.get('fatherNationality')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Father's nationality is required</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Adres vader <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="fatherAddress"
              placeholder="Straatnaam en huisnummer"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherAddress')?.invalid &&
                confirmationForm.get('fatherAddress')?.touched
              "
            />
            @if(confirmationForm.get('fatherAddress')?.invalid &&
            confirmationForm.get('fatherAddress')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Adres vader is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Postcode en woonplaats vader
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="fatherPostalCity"
              placeholder="Postcode en plaats"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherPostalCity')?.invalid &&
                confirmationForm.get('fatherPostalCity')?.touched
              "
            />
            @if(confirmationForm.get('fatherPostalCity')?.invalid &&
            confirmationForm.get('fatherPostalCity')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Postcode en plaats zijn verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Mobiele telefoon vader <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="tel"
              formControlName="fatherPhone"
              placeholder="+31 6 1234 5678"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherPhone')?.invalid &&
                confirmationForm.get('fatherPhone')?.touched
              "
            />
            @if(confirmationForm.get('fatherPhone')?.invalid &&
            confirmationForm.get('fatherPhone')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Telefoonnummer vader is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >E-mailadres vader
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="email"
              formControlName="fatherEmail"
              placeholder="vader.email@voorbeeld.nl"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('fatherEmail')?.invalid &&
                confirmationForm.get('fatherEmail')?.touched
              "
            />
            @if(confirmationForm.get('fatherEmail')?.invalid &&
            confirmationForm.get('fatherEmail')?.touched) {
            <label class="label">
              @if(confirmationForm.get('fatherEmail')?.hasError('required')) {
              <span class="label-text-alt text-error">E-mailadres vader is verplicht</span>
              } @else if(confirmationForm.get('fatherEmail')?.hasError('email'))
              {
              <span class="label-text-alt text-error">
                Voer een geldig e-mailadres in
              </span>
              }
            </label>
            }
          </div>
        </div>
        }

        <!-- Step 4: Sponsor Information -->
        @if(currentStep === 4) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">
            Informatie Sponsor
          </h3>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Naam sponsor <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="sponsorName"
              placeholder="Voer naam sponsor in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('sponsorName')?.invalid &&
                confirmationForm.get('sponsorName')?.touched
              "
            />
            @if(confirmationForm.get('sponsorName')?.invalid &&
            confirmationForm.get('sponsorName')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Naam sponsor is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Achternaam sponsor <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="sponsorSurname"
              placeholder="Voer achternaam sponsor in"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('sponsorSurname')?.invalid &&
                confirmationForm.get('sponsorSurname')?.touched
              "
            />
            @if(confirmationForm.get('sponsorSurname')?.invalid &&
            confirmationForm.get('sponsorSurname')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Achternaam sponsor is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Geboortedatum sponsor
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="date"
              formControlName="sponsorDOB"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('sponsorDOB')?.invalid &&
                confirmationForm.get('sponsorDOB')?.touched
              "
            />
            @if(confirmationForm.get('sponsorDOB')?.invalid &&
            confirmationForm.get('sponsorDOB')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Geboortedatum sponsor is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Telefoonnummer sponsor <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="tel"
              formControlName="sponsorPhone"
              placeholder="+31 6 1234 5678"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('sponsorPhone')?.invalid &&
                confirmationForm.get('sponsorPhone')?.touched
              "
            />
            @if(confirmationForm.get('sponsorPhone')?.invalid &&
            confirmationForm.get('sponsorPhone')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Telefoonnummer sponsor is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Adres sponsor <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="sponsorAddress"
              placeholder="Straatnaam en huisnummer"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('sponsorAddress')?.invalid &&
                confirmationForm.get('sponsorAddress')?.touched
              "
            />
            @if(confirmationForm.get('sponsorAddress')?.invalid &&
            confirmationForm.get('sponsorAddress')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Adres sponsor is verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Postcode en woonplaats sponsor
                <span class="text-red-600">*</span></span
              >
            </label>
            <input
              type="text"
              formControlName="sponsorPostalCity"
              placeholder="Postcode en plaats"
              class="input input-bordered w-full"
              [class.input-error]="
                confirmationForm.get('sponsorPostalCity')?.invalid &&
                confirmationForm.get('sponsorPostalCity')?.touched
              "
            />
            @if(confirmationForm.get('sponsorPostalCity')?.invalid &&
            confirmationForm.get('sponsorPostalCity')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Postcode en plaats zijn verplicht</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Is de sponsor katholiek?
                <span class="text-red-600">*</span></span
              >
            </label>
            <div class="flex gap-6">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="sponsorCatholic"
                  value="Yes"
                  class="radio radio-warning"
                />
                <span class="label-text">Ja</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="sponsorCatholic"
                  value="No"
                  class="radio radio-warning"
                />
                <span class="label-text">Nee</span>
              </label>
            </div>
            @if(confirmationForm.get('sponsorCatholic')?.invalid &&
            confirmationForm.get('sponsorCatholic')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Selecteer een optie</span
              >
            </label>
            }
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Upload hier doopakte van sponsor</span
              >
            </label>
            <input
              type="file"
              (change)="onFileSelected($event, 'sponsor')"
              accept="image/*,.pdf"
              class="file-input file-input-bordered file-input-warning w-full"
            />
            @if(selectedSponsorCertificate) {
            <label class="label">
              <span class="label-text-alt text-success"
                >Geselecteerd: {{ selectedSponsorCertificate }}</span
              >
            </label>
            }
          </div>
        </div>
        }

        <!-- Step 5: Privacy & Additional Information -->
        @if(currentStep === 5) {
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-6">
            Privacyverklaring
          </h3>

          <div class="bg-amber-50 p-6 rounded-lg">
            <h4 class="font-bold text-lg text-gray-800 mb-3">
              Privacyverklaring Rooms-Katholieke Parochies en Algemene Verordening Bescherming Persoonsgegevens Parochies 2018.
            </h4>
            <p class="text-sm text-gray-700 mb-3">
              In verband met de Algemene Verordening Gegevensbescherming (AVG) is een Privacyverklaring van toepassing en zijn bovengenoemde regelingen opgesteld. De Privacyverklaring en de Algemene Regeling zijn beschikbaar op de website en kunnen worden gedownload.
            </p>
            <p class="text-sm text-gray-700 mb-3">
              Hieronder vindt u een aantal zaken (in verkorte, vereenvoudigde versies) die voor u belangrijk zijn en waarvoor wij (vooraf) uw toestemming vragen. Als u twijfelt over de uitleg in de verkorte versie, verwijzen wij u altijd naar de volledige Privacyverklaring en/of de Algemene Regeling op onze website.
            </p>
            <div class="mt-4 space-y-3">
              <div>
                <p class="font-semibold text-gray-800">Gegevens Algemeen</p>
              </div>
              <div>
                <p class="font-semibold text-gray-800">Akkoord</p>
                <p class="text-sm text-gray-700">
                  De aanvrager(s) gaat/gaan akkoord met de bepalingen van de Privacyverklaring.
                </p>
              </div>
              <div>
                <p class="font-semibold text-gray-800">Niet akkoord</p>
                <p class="text-sm text-gray-700">
                  Als u niet akkoord gaat, kan de aanvraag niet worden verwerkt.
                </p>
              </div>
              <p class="text-sm text-gray-700">
                De informatie die u verstrekt, kan worden gebruikt voor parochieadministratie en wordt hiervoor digitaal of op papier (in registers) opgeslagen. U kunt verzoeken om deze informatie in te zien. Het verzoeken van verwijdering van deze informatie is over het algemeen niet mogelijk omdat dit noodzakelijk is voor het goed functioneren van een parochie. De procedure voor registratie en uitschrijving (2013) is van toepassing op verzoeken om uit de parochieregisters/administratie te worden verwijderd.
              </p>
              <p class="text-sm text-gray-700">
                Uw informatie wordt altijd vertrouwelijk behandeld en zal nooit zonder uw toestemming worden verstrekt aan externe instellingen/instanties/derden.
              </p>
              <p class="text-sm text-gray-700 mb-3">
                Hieronder kunt u aangeven of u al dan niet akkoord gaat met de bovengenoemde AVG en uw verzoek zal worden verwerkt (ongeacht uw antwoord).
              </p>
            </div>
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Gaat u akkoord met het privacybeleid van onze parochie?
                <span class="text-red-600">*</span></span
              >
            </label>
            <div class="space-y-3">
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="privacyAgreement"
                  value="agree"
                  class="radio radio-warning"
                />
                <span class="label-text">Ja! Ik ga akkoord</span>
              </label>
              <label class="cursor-pointer flex items-center gap-2">
                <input
                  type="radio"
                  formControlName="privacyAgreement"
                  value="disagree"
                  class="radio radio-warning"
                />
                <span class="label-text">Nee! Ik ga niet akkoord</span>
              </label>
            </div>
            @if(confirmationForm.get('privacyAgreement')?.invalid &&
            confirmationForm.get('privacyAgreement')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error"
                >Ga akkoord met het privacybeleid om door te gaan</span
              >
            </label>
            }
          </div>

          <div class="bg-gray-100 p-6 rounded-lg">
            <h4 class="font-bold text-lg text-gray-800 mb-2">Kosten</h4>
            <p class="text-gray-700">
              De kosten voor de voorbereiding op het Vormsel bedragen 75,00 euro per vormeling.
            </p>
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold text-gray-700"
                >Aanvullende informatie</span
              >
            </label>
            <input
              type="text"
              formControlName="additionalField"
              placeholder="Voer aanvullende informatie in (optioneel)"
              class="input input-bordered w-full"
            />
          </div>
        </div>
        }

        <!-- Success Message -->
        @if(submitSuccess) {
        <div class="alert alert-success mb-6">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="stroke-current shrink-0 h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span
            >Hartelijk dank voor uw Vormsel registratie! We nemen binnenkort contact met u op met voorbereidingsdetails.</span
          >
        </div>
        }

        <!-- Error Message -->
        @if(submitError) {
        <div class="alert alert-error mb-6">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="stroke-current shrink-0 h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span
            >Er is een fout opgetreden bij het verzenden van uw verzoek. Probeer het opnieuw.</span
          >
        </div>
        }

        <!-- Navigation Buttons -->
        <div class="flex justify-between mt-8">
          @if(currentStep > 1) {
          <button
            type="button"
            class="btn btn-outline btn-warning"
            (click)="previousStep()"
          >
            Vorige
          </button>
          } @else {
          <div></div>
          } @if(currentStep < 5) {
          <button
            type="button"
            class="btn bg-amber-600 hover:bg-amber-700 text-white border-none"
            (click)="nextStep()"
          >
            Volgende
          </button>
          } @else {
          <button
            type="submit"
            class="btn bg-amber-600 hover:bg-amber-700 text-white border-none"
            [disabled]="confirmationForm.invalid || isSubmitting"
          >
            @if(isSubmitting) {
            <span class="loading loading-spinner"></span>
            Bezig met verzenden... } @else { Verzoek verzenden }
          </button>
          }
        </div>
      </form>
    </div>
  </div>
</section>
